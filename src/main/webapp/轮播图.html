<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>轮播图</title>

    <link rel="stylesheet"  href="css/轮播图.css">
</head>
<body>

    <div id="banner">
        <ul id="imglist">
            <li><img src="70周年.png" alt=""></li>
            <li><img src="img_3.png" alt=""></li>
            <li><img src="雪景.png" alt=""></li>
            <li><img src="阳光.png" alt=""></li>
            <li><img src="70周年.png" alt=""></li>
        </ul>
        <ul id = "icolist">
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
        </ul>
        <div class="prev">《</div>
        <div class="next">》</div>
    </div>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        var eprev = document.querySelector('.prev');
        var enext = document.querySelector('.next');
        var esico = document.getElementById('icolist').getElementsByTagName('li');
        var eicolist = document.querySelector('#icolist');
        var eimglist = document.querySelector('#imglist');
        var left =0;
        var timer;
        run();
        function run(){
            if(left<=-6400){
                left=0;
            }
            var m = Math.floor(-left / 1600);
            imglist.style.marginLeft=left + 'px';
            var n = (left % 1600 == 0) ? n = 1200 : n =10;
            left -=10;
            timer = setTimeout(run,n);
            icochange(m);
        }
        function imgchange(n){
            let  It = -(n*1600);
            imglist.style.marginLeft = It +'px';
            letf = It;
        }
        eprev.onclick = function (){
           let prevgo = Math.floor(-left / 1600) - 1;
           if(prevgo == -1){
               prevgo = 3;
           }
           imgchange(prevgo);

        }
        enext.onclick = function (){
            let nextgo = Math.floor(-left / 1600) + 1;
            if(nextgo == 4){
                nextgo = 0;
            }
            imgchange(nextgo);
        }
        function icochange(m){
            for(let index = 0; index < esico.length; index++){
                esico[index].style.backgroundColor = '';
            }
            if (m<esico.length){
                esico[m].style.backgroundColor = 'red';
            }
        }
        eicolist.onclick = function (){
            var tg = event.target;
            let ico = tg.innerHTML -1;
            imgchange(ico);
            icochange(ico);
        }
        eimglist.onmouseover = function (){
            clearTimeout(timer);
        }
        eimglist.onmouseout = function (){
            run();
        }
    </script>

</body>
</html>